PMSET(1)                  BSD General Commands Manual                 PMSET(1)

NAME
     pmset -- manipulate power management settings

SYNOPSIS
     pmset [-a | -b | -c | -u] [displaysleep minutes] [disksleep minutes]
           [sleep minutes] [womp 1/0] [ring 1/0] [autorestart 1/0]
           [powerbutton 1/0] [lidwake 1/0] [acwake 1/0] [lessbright 1/0]
           [halfdim 1/0] [sms 1/0] [boot]
     pmset -u [haltlevel percent] [haltafter minutes] [haltremain minutes]
     pmset -g [custom | live | cap | sched | ups | ps | pslog | rawlog]
     pmset schedule [cancel] type date+time [owner]
     pmset repeat cancel
     pmset repeat type weekdays time
     pmset [touch | sleepnow | noidle | lock]

DESCRIPTION
     pmset changes and reads power management settings such as idle sleep tim-
     ing, wake on administrative access, automatic restart on power loss, etc.

SETTING
     The -a, -b, -c, -u flags determine whether the settings apply to battery
     ( -b ), charger (wall power) ( -c ), UPS ( -u ) or all ( -a ).

     Use a minutes argument of 0 to set the idle time to never.

     pmset must be run as root in order to modify any settings.

     The boot argument tells power management that system bootup is complete.
     Loginwindow handles this on a normal Mac OS X system.

GETTING
     -g (with no argument) will display the settings currently in use.
     -g live will also display the settings currently in use.
     -g custom will display custom settings for all power sources, although
     these settings may not currently be in use; a pre-set settings profile
     may be active instead.
     -g cap will display which power management features the machine supports.
     -g sched will display scheduled startup/wake and shutdown/sleep events.
     -g ups will display UPS emergency thresholds.
     -g ps will display status of batteries and UPSs.
     -g pslog will display an ongoing log of power source (battery and UPS)
     state.
     -g rawlog will display an ongoing log of battery state as read directly
     from battery.
     -g profiles will display the settings associated with each Energy Saver
     profile.

ARGUMENTS
     displaysleep - display sleep timer; replaces 'dim' argument in 10.4
     (value in minutes, or 0 to disable)
     disksleep - disk spindown timer; replaces 'spindown' argument in 10.4
     (value in minutes, or 0 to disable)
     sleep - system sleep timer (value in minutes, or 0 to disable)
     womp - wake on ethernet magic packet (value = 0/1)
     ring - wake on modem ring (value = 0/1)
     autorestart - automatic restart on power loss (value = 0/1)
     powerbutton - sleep the machine when power button is pressed (value =
     0/1)
     lidwake - wake the machine when the laptop lid (or clamshell) is opened
     (value = 0/1)
     acwake - wake the machine when power source (AC/battery) is changed
     (value = 0/1)
     lessbright - slightly turn down display brightness when switching to this
     power source (value = 0/1)
     halfdim - display sleep will use an intermediate half-brightness state
     between full brightness and fully off  (value = 0/1)
     sms - use Sudden Motion Sensor to park disk heads on sudden changes in G
     force (value = 0/1)
     hibernatemode - change hibernation mode. Please use caution. (value =
     integer)
     hibernatefile - change hibernation image file location. Image may only be
     located on the root volume. Please use caution. (value = path)
     ttyskeepawake - prevent idle system sleep when any tty (e.g. remote login
     session) is 'active'. A tty is 'inactive' only when its idle time exceeds
     the system sleep timer. (value = 0/1)

SETTINGS PROFILES
     Mac OS X stores sets of pre-defined Energy Saver settings in a few num-
     bered profiles (1, 2, 3).  All user-modified settings are stored in the
     custom profile (-1).  The two numbered profiles 0 and 4 are unused.

     Profiles are set per-power source. Default profile selections are
     (AC=2, Batt=1, UPS=1). See Examples for ways to set profiles.

     Any modifications made to Energy Saver settings via Energy Saver or pmset
     will automatically switch your active profile to Custom if it was not
     already Custom. OS X tracks the selected profiles and the settings for
     the Custom profile in com.apple.PowerManagement.plist discussed in Files
     below.

     1 corresponds to Energy Saver Optimization for "Better Energy Savings"
     2 corresponds to Energy Saver Optimization for "Normal"
     3 corresponds to Energy Saver Optimization for "Better Performance"
     -1 corresponds to Energy Saver Optimization for "Custom"

SAFE SLEEP ARGUMENTS
     hibernatemode takes a bitfield argument defining SafeSleep behavior.
     Passing 0 disables SafeSleep altogether, forcing the computer into a reg-
     ular sleep.

     0001 (bit 0) enables hibernation; causes OS X to write memory state to
     hibernation image at sleep time. On wake (without bit 1 set) OS X will
     resume from the hibernation image. Bit 0 set (without bit 1 set) causes
     OS X to write memory state and immediately hibernate at sleep time.

     0010 (bit 1), in conjunction with bit 0, causes OS X to maintain system
     state in memory and leave system power on until battery level drops below
     a near empty threshold (This enables quicker wakeup from memory while
     battery power is available). Upon nearly emptying the battery, OS X shuts
     off all system power and hibernates; on wake the system will resume from
     hibernation image, not from memory.

     hibernatemode is set to 3 (binary 0011) by default on supported porta-
     bles.

     hibernatemode is set to 0 (binary 0000) by default on supported desktops.

     Please note that hibernatefile may only point to a file located on the
     root volume.

UPS SPECIFIC ARGUMENTS
     UPS-specific arguments are only valid following the -u option. UPS set-
     tings also have an on/off value. Use a -1 argument instead of percent or
     minutes to turn any of these settings off. If multiple halt conditions
     are specified, the system will halt on the first condition that occurs in
     a low power situation.

     haltlevel - when draining UPS battery, battery level at which to trigger
     an emergency shutdown (value in %)
     haltafter - when draining UPS battery, trigger emergency shutdown after
     this long running on UPS power (value in minutes, or 0 to disable)
     haltremain - when draining UPS battery, trigger emergency shutdown when
     this much time remaining on UPS power is estimated (value in minutes, or
     0 to disable)

     Note: None of these settings are observed on a system with support for an
     internal battery, such as a laptop. UPS emergency shutdown settings are
     for desktop and server only.

SCHEDULED EVENT ARGUMENTS
     pmset allows you to schedule system sleep, shutdown, wakeup and/or power
     on. "schedule" is for setting up one-time power events, and "repeat" is
     for setting up daily/weekly power on and power off events. Note that you
     may only have one pair of repeating events scheduled - a "power on" event
     and a "power off" event.

     type - one of sleep, wake, poweron, shutdown, wakeorpoweron
     date/time - "MM/dd/yy HH:mm:ss" (in 24 hour format; must be in quotes)
     time - HH:mm:ss
     weekdays - a subset of MTWRFSU ("M" and "MTWRF" are valid strings)
     owner - a string describing the person or program who is scheduling this
     one-time power event (optional)

POWER SOURCE ARGUMENTS
     -g with a 'batt' or 'ps' argument will show the state of all attached
     power sources.  A health estimate for the battery is appended to the end
     of the line, in the form (Fair/Good), indicating the battery is in 'Fair'
     health and we have 'Good' confidence in that estimate.

     Certain Apple battery calibration tools may temporarily disable battery
     charging, even though your Apple portable is plugged into AC power. Such
     tools will never surprise you with this behavior; you will know it's hap-
     pening. This state will be reflected in an additional line of output to
     'batt' or 'ps' readings, including the pid of the app inducing this
     behavior.

         'ChargeInhibit':    1432

     -g with a 'pslog' or 'rawlog' argument is normally used for debugging,
     such as isolating a problem with an aging battery.

OTHER ARGUMENTS
     boot - tell the kernel that system boot is complete (normally LoginWindow
     does this). May be useful to Darwin users.
     force - tells PM to immediately activate these settings. Does not write
     them to disk, and the settings may easily be overwritten. Useful in cir-
     cumstances where PM's configd plugin happens not to be running.
     touch - PM re-reads existing settings from disk.
     noidle - while continuousy running, pmset prevents idle sleep.
     sleepnow - causes an immediate system sleep
     dim - deprecated in 10.4 in favor of 'displaysleep'. 'dim' will continue
     to work.
     spindown - deprecated in 10.4 in favor of 'disksleep'. 'spindown' will
     continue to work.

EXAMPLES
     This command sets displaysleep to a 5 minute timer on battery power,
     leaving other settings on battery power and other power sources unper-
     turbed.

     pmset -b displaysleep 5

     Sets displaysleep to 10, disksleep to 10, system sleep to 30, and turns
     on WakeOnMagicPacket for ALL power sources (AC, Battery, and UPS) as
     appropriate

     pmset -a displaysleep 10 disksleep 10 sleep 30 womp 1

     Restores the system's energy settings to their default values. Any user
     modifications are preserved under the custom profile -1.

     pmset -c 2 -b 1 -u 1

     Changes energy settings for all power sources to the Custom settings set
     via pmset or Energy Saver.

     pmset -a -1

     For a system with an attached and supported UPS, this instructs the sys-
     tem to perform an emergency shutdown when UPS battery drains to below
     40%.

     pmset -u haltlevel 40

     For a system with an attached and supported UPS, this instructs the sys-
     tem to perform an emergency shutdown when UPS battery drains to below
     25%, or when the UPS estimates it has less than 30 minutes remaining run-
     time. The system shuts down as soon as either of these conditions is met.

     pmset -u haltlevel 25 haltremain 30

     For a system with an attached and supported UPS, this instructs the sys-
     tem to perform an emergency shutdown after 2 minutes of running on UPS
     battery power.

     pmset -u haltafter 2

     Schedules the system to automatically wake from sleep on July 4, 2009, at
     8PM.

     pmset schedule wake "07/04/09 20:00:00"

     Schedules a repeating shutdown to occur each day, Tuesday through Satur-
     day, at 11AM.

     pmset repeat shutdown TWRFS 11:00:00

     Prints the power management settings in use by the system.

     pmset -g

     Prints a snapshot of battery/power source state at the moment.

     pmset -g batt

     If your system suddenly sleeps on battery power with 20-50% of capacity
     remaining, leave this command running in a Terminal window. When you see
     the problem and later power and wake the computer, you'll be able to
     detect sudden discontinuities (like a jump from 30% to 0%) indicative of
     an aging battery.

     pmset -g pslog

Files
     All changes made through pmset are saved in a persistent preferences file
     (per-system, not per-user) at
     /Library/Preferences/SystemConfiguration/com.apple.PowerManagement.plist

     Scheduled power on/off events are stored separately in
     /Library/Preferences/SystemConfiguration/com.apple.AutoWake.plist

     pmset modifies the same file that System Preferences Energy Saver modi-
     fies.

Darwin                           April 1, 2006                          Darwin
